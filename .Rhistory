url() %>%
readRDS()
}
pbp_list <- years %>%
lapply(get_pbp)
pbp_db <- do.call(rbind, pbp_list)
f.pbp <- paste0("data/pbp_db.csv")
pbp_db %>% saveRDS(f.pbp_db)
rm(f.pbp)
f.pbp_db <- paste0("data/pbp_db.csv")
pbp_db %>% saveRDS(f.pbp_db)
?saveRDS
pbp_db %>% saveRDS(file = f.pbp_db)
f.pbp_db <- paste0("data/pbp_db")
pbp_db %>% saveRDS(file = f.pbp_db)
pbp_db <- do.call(rbind, years %>%
lapply(get_pbp))
source('~/Documents/dev/football/new_init2.R')
pbp_db <-
rbind %>%
do.call(years %>%
lapply(get_pbp)) %>%
saveRDS(f.pbp_db)
View(pbp_list)
rm(pbp_list)
View(2019players)
View(2019players)
View('2019players')
rm(2019players)
rm('2019players')
file.exists("data/pbp_db.rds")
f.pbp_db <- paste0("data/pbp_db.rds")
ifelse(
file.exists(f.pbp_db),
readRDS(f.pbp_db),
pbp_db <-
rbind %>%
do.call(years %>%
lapply(get_pbp)) %>%
saveRDS(f.pbp_db)
)
?ifelse()
file.exists(f.pbp_db) == TRUE
ifelse(
file.exists(f.pbp_db) == TRUE,
readRDS(f.pbp_db),
pbp_db <-
rbind %>%
do.call(years %>%
lapply(get_pbp)) %>%
saveRDS(f.pbp_db)
)
load_pbp <- function(x) {
pbp_db <- readRDS(x)
return(pbp_db)
}
ifelse(
file.exists(f.pbp_db) == TRUE,
load_pbp(f.pbp_db),
pbp_db <-
rbind %>%
do.call(years %>%
lapply(get_pbp)) %>%
saveRDS(f.pbp_db)
)
ifelse(
file.exists(f.pbp_db) == TRUE,
pbp_db <-
load_pbp(f.pbp_db),
pbp_db <-
rbind %>%
do.call(years %>%
lapply(get_pbp)) %>%
saveRDS(f.pbp_db)
)
ifelse(
file.exists(f.pbp_db) == TRUE,
pbp_db <-
readRDS(f.pbp_db),
pbp_db <-
rbind %>%
do.call(years %>%
lapply(get_pbp)) %>%
saveRDS(f.pbp_db)
)
rm(desktop_facet)
rm(mobile_facet)
rm(pbp_db)
pkgs <- c(
"devtools",
"tidyverse",
"readr",
"pander",
"furrr",
"na.tools",
"ggimage",
"teamcolors",
"glue",
"dplyr",
"tictoc",
"animation",
"gt",
"DT",
"ggthemes",
"ggforce",
"ggridges",
"ggrepel",
"ggbeeswarm",
"extrafont",
"tidytext",
"RCurl"
)
installed_packages <- pkgs %in%
rownames(installed.packages())
if (any(installed_packages == FALSE)) {
install.packages(pkgs[!installed_packages])
}
lapply(pkgs, library, character.only = TRUE)
# library("nflscrapR") # doesn't work anymore
library("nflfastR")
library("ffscrapr")
##reset
setwd("~/")
gid <- paste(getwd())
gid
device <- ""
if (gid == "/Volumes/HDD/Users/colinwelsh") {
## Maverick - MBP
setwd("~/Documents/dev/football")
device <- "Maverick (MBP)"
} else if (gid == "/Users/ColinWelsh") {
## Goose - iMac
setwd("~/Documents/dev/football")
device <- "Goose (iMac)"
} else if (gid == "/home/rstudio-user") {
## RStudio Cloud
setwd("/cloud/project")
device <- "RStudio Cloud"
}
print(paste(device, "is ready for some football", sep = " "))
rm(gid, device)
pkgs <- c(
"devtools",
"tidyverse",
"readr",
"pander",
"furrr",
"na.tools",
"ggimage",
"teamcolors",
"glue",
"dplyr",
"tictoc",
"animation",
"gt",
"DT",
"ggthemes",
"ggforce",
"ggridges",
"ggrepel",
"ggbeeswarm",
"extrafont",
"tidytext",
"RCurl"
)
installed_packages <- pkgs %in%
rownames(installed.packages())
if (any(installed_packages == FALSE)) {
install.packages(pkgs[!installed_packages])
}
lapply(pkgs, library, character.only = TRUE)
# library("nflscrapR") # doesn't work anymore
library("nflfastR")
library("ffscrapr")
##reset
setwd("~/")
gid <- paste(getwd())
gid
device <- ""
if (gid == "/Volumes/HDD/Users/colinwelsh") {
## Maverick - MBP
setwd("~/Documents/dev/football")
device <- "Maverick (MBP)"
} else if (gid == "/Users/ColinWelsh") {
## Goose - iMac
setwd("~/Documents/dev/football")
device <- "Goose (iMac)"
} else if (gid == "/home/rstudio-user") {
## RStudio Cloud
setwd("/cloud/project")
device <- "RStudio Cloud"
}
print(paste(device, "is ready for some football", sep = " "))
rm(gid, device)
install.packages(c("broom", "gganimate", "pkgbuild", "processx", "RcppArmadillo", "reactR", "sf", "tidytext"))
install.packages(c("broom", "gganimate", "pkgbuild", "processx", "RcppArmadillo", "reactR", "sf", "tidytext"))
pkgs <- c(
"devtools",
"tidyverse",
"readr",
"pander",
"furrr",
"na.tools",
"ggimage",
"teamcolors",
"glue",
"dplyr",
"tictoc",
"animation",
"gt",
"DT",
"ggthemes",
"ggforce",
"ggridges",
"ggrepel",
"ggbeeswarm",
"extrafont",
"tidytext",
"RCurl"
)
installed_packages <- pkgs %in%
rownames(installed.packages())
if (any(installed_packages == FALSE)) {
install.packages(pkgs[!installed_packages])
}
lapply(pkgs, library, character.only = TRUE)
# library("nflscrapR") # doesn't work anymore
library("nflfastR")
library("ffscrapr")
##reset
setwd("~/")
gid <- paste(getwd())
gid
device <- ""
if (gid == "/Volumes/HDD/Users/colinwelsh") {
## Maverick - MBP
setwd("~/Documents/dev/football")
device <- "Maverick (MBP)"
} else if (gid == "/Users/ColinWelsh") {
## Goose - iMac
setwd("~/Documents/dev/football")
device <- "Goose (iMac)"
} else if (gid == "/home/rstudio-user") {
## RStudio Cloud
setwd("/cloud/project")
device <- "RStudio Cloud"
}
print(paste(device, "is ready for some football", sep = " "))
rm(gid, device)
f.pbp_db <- paste0("data/pbp_db.rds")
# convert rds to csv
write_csv(readRDS(f.pbp_db), f.pbp_db)
f.pbp_db_rds <- paste0("data/pbp_db.rds")
f.pbp_db_csv <- paste0("data/pbp_db.csv")
write_csv(readRDS(f.pbp_db_rds), f.pbp_db_csv)
pkgs <- c(
"devtools",
"tidyverse",
"odbc",
"readr",
"pander",
"furrr",
"na.tools",
"ggimage",
"teamcolors",
"glue",
"dplyr",
"tictoc",
"animation",
"gt",
"DT",
"ggthemes",
"ggforce",
"ggridges",
"ggrepel",
"ggbeeswarm",
"extrafont",
"tidytext",
"RCurl"
)
installed_packages <- pkgs %in%
rownames(installed.packages())
if (any(installed_packages == FALSE)) {
install.packages(pkgs[!installed_packages])
}
lapply(pkgs, library, character.only = TRUE)
# library("nflscrapR") # doesn't work anymore
library("nflfastR")
library("ffscrapr")
pkgs <- c(
"devtools",
"tidyverse",
"DBI",
"odbc",
"readr",
"pander",
"furrr",
"na.tools",
"ggimage",
"teamcolors",
"glue",
"dplyr",
"tictoc",
"animation",
"gt",
"DT",
"ggthemes",
"ggforce",
"ggridges",
"ggrepel",
"ggbeeswarm",
"extrafont",
"tidytext",
"RCurl"
)
installed_packages <- pkgs %in%
rownames(installed.packages())
if (any(installed_packages == FALSE)) {
install.packages(pkgs[!installed_packages])
}
lapply(pkgs, library, character.only = TRUE)
# library("nflscrapR") # doesn't work anymore
library("nflfastR")
library("ffscrapr")
##reset
setwd("~/")
gid <- paste(getwd())
gid
device <- ""
if (gid == "/Volumes/HDD/Users/colinwelsh") {
## Maverick - MBP
setwd("~/Documents/dev/football")
device <- "Maverick (MBP)"
} else if (gid == "/Users/ColinWelsh") {
## Goose - iMac
setwd("~/Documents/dev/football")
device <- "Goose (iMac)"
} else if (gid == "/home/rstudio-user") {
## RStudio Cloud
setwd("/cloud/project")
device <- "RStudio Cloud"
}
print(paste(device, "is ready for some football", sep = " "))
rm(gid, device)
sort(unique(odbcListDrivers()[[1]]))
source('~/.active-rstudio-document')
pkgs <- c(
"devtools",
"tidyverse",
"DBI",
"odbc",
"rmariadb",
"readr",
"pander",
"furrr",
"na.tools",
"ggimage",
"teamcolors",
"glue",
"dplyr",
"tictoc",
"animation",
"gt",
"DT",
"ggthemes",
"ggforce",
"ggridges",
"ggrepel",
"ggbeeswarm",
"extrafont",
"tidytext",
"RCurl"
)
installed_packages <- pkgs %in%
rownames(installed.packages())
if (any(installed_packages == FALSE)) {
install.packages(pkgs[!installed_packages])
}
lapply(pkgs, library, character.only = TRUE)
# library("nflscrapR") # doesn't work anymore
install.packages("RMariaDB")
pkgs <- c(
"devtools",
"tidyverse",
"DBI",
"odbc",
"RMariaDB",
"readr",
"pander",
"furrr",
"na.tools",
"ggimage",
"teamcolors",
"glue",
"dplyr",
"tictoc",
"animation",
"gt",
"DT",
"ggthemes",
"ggforce",
"ggridges",
"ggrepel",
"ggbeeswarm",
"extrafont",
"tidytext",
"RCurl"
)
installed_packages <- pkgs %in%
rownames(installed.packages())
if (any(installed_packages == FALSE)) {
install.packages(pkgs[!installed_packages])
}
lapply(pkgs, library, character.only = TRUE)
# library("nflscrapR") # doesn't work anymore
library("nflfastR")
# library("ffscrapr")
##reset
setwd("~/")
gid <- paste(getwd())
gid
device <- ""
if (gid == "/Volumes/HDD/Users/colinwelsh") {
## Maverick - MBP
setwd("~/Documents/dev/football")
device <- "Maverick (MBP)"
} else if (gid == "/Users/ColinWelsh") {
## Goose - iMac
setwd("~/Documents/dev/football")
device <- "Goose (iMac)"
} else if (gid == "/home/rstudio-user") {
## RStudio Cloud
setwd("/cloud/project")
device <- "RStudio Cloud"
}
print(paste(device, "is ready for some football", sep = " "))
rm(gid, device)
?askForPassword
db_user <- "publiccolin"
con <- dbConnect(RMariaDB::MariaDB(),
host = "72.78.233.235",
port = "3306",
user = db_user,
password = askForPassword(paste0("Enter MariaDB password for user:", db_user)),
dbname = "football",
# database = "football",
# Server = "localhost\\SQLEXPRESS",
# Database = "datawarehouse",
Trusted_Connection = "True")
con <- dbConnect(RMariaDB::MariaDB(),
host = "72.78.233.235",
port = "3306",
user = db_user,
password = rstudioapi::askForPassword(paste0("Enter MariaDB password for user:", db_user)),
dbname = "football",
# database = "football",
# Server = "localhost\\SQLEXPRESS",
# Database = "datawarehouse",
Trusted_Connection = "True")
db_user <- "publiccolin"
con <- dbConnect(RMariaDB::MariaDB(),
host = "72.78.233.235",
port = "3306",
user = db_user,
password = rstudioapi::askForPassword(paste0("Enter MariaDB password for user:", db_user)),
dbname = "football",
# database = "football",
# Server = "localhost\\SQLEXPRESS",
# Database = "datawarehouse",
Trusted_Connection = "True")
db_user <- "publiccolin"
con <- dbConnect(RMariaDB::MariaDB(),
host = "72.78.233.235",
port = "3306",
user = db_user,
password = rstudioapi::askForPassword(paste("Enter MariaDB password for user:", db_user, sep="")),
dbname = "football",
# database = "football",
# Server = "localhost\\SQLEXPRESS",
# Database = "datawarehouse",
Trusted_Connection = "True")
db_user <- "publiccolin"
con <- dbConnect(RMariaDB::MariaDB(),
host = "72.78.233.235",
port = "3306",
user = db_user,
password = rstudioapi::askForPassword(paste("Enter MariaDB password for user:", db_user, sep=" ")),
dbname = "football",
# database = "football",
# Server = "localhost\\SQLEXPRESS",
# Database = "datawarehouse",
Trusted_Connection = "True")
dbWriteTable(con, "pbp", readRDS(f.pbp_db_rds))
?dbWriteTable
# write table
RMariaDB::dbWriteTable(con, "pbp", readRDS(f.pbp_db_rds), overwrite = TRUE)
nrow(readRDS(f.pbp_db_rds))
RMariaDB::dbWriteTable(con, "schedule", fast_scraper_schedules(years, pp = TRUE))
source(con.R)
source("con.R")
source("con.R")
dbListConnections()
dbListTables(con)
dbListConnections(con)
dbListObjects(con)
db_list_tables(con)
dbListFields(con)
?dbListFields
dbListFields(con, "pbp")
dbListFields(con, "schedule")
dbListObjects(con)
?dbListObjects
