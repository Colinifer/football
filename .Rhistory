rel_min_height = 0.001,
bandwidth = 1,
calc_ecdf = T,
scale = 0.9,
color = color_cw[6],
size = 0.2,
show.legend = F
) +
#geom_boxplot(size = 0.4, color = 'darkblue', width = 0.6, outlier.alpha = 0, notchwidth = 1) +
scale_color_manual(values = c(
color_cw[6],
color_cw[5],
color_cw[7]
)) +
geom_shadowtext(
aes(
x = ifelse(obs_num == 1, 48, NA),
y = tm_rnk - 0.5,
color = factor(status)
),
hjust = 1,
bg.color = color_cw[2],
#[family = font_family,]
size = 1.2,
na.rm = T,
bg.r = 0.2
) +
scale_x_continuous(
breaks = seq(0, 80, 10),
expand = expansion(mult = 0),
limits = c(0, 50)
) +
scale_y_reverse(expand = expansion(mult = c(0, 0.04), add = c(0.2, 0)), limits = c(4.1, 0)) +
scale_fill_manual(values = c(
alpha(color_cw[7], 0.5),
alpha(color_cw[6], 0.5),
alpha(color_cw[5], 0.5),
alpha(color_cw[6], 0.5),
alpha(color_cw[7], 0.5)
)) +
labs(
title = paste0('2020 Expected 1/2 PPR Fantasy Points per Game as of Week ', my_week),
subtitle = 'Grey represents middle 50% of outcomes, Orange tails are each 10% of outcomes  |  Caret shows actual avg  |  Based on 10,000 Simulations',
x = NULL
) +
theme_cw +
theme(
axis.title.y = element_blank(),
axis.text.y = element_blank(),
axis.ticks.y = element_blank(),
panel.grid.major.y = element_blank(),
axis.text = element_text(size = 4),
axis.line = element_line(color = '#e0e0e0', size = 0.5),
panel.border = element_rect(color = '#16191C', size = 0.1),
axis.ticks.length = unit(0.15, 'lines'),
axis.ticks = element_line(color = '#e0e0e0', size = 0.5),
panel.grid.minor.x = element_line('#16191C', size = 0.2),
panel.spacing.x = unit(0.5, 'lines')
) +
annotation_custom(
make_gradient(deg = 270),
ymin = Inf,
ymax = -0.1,
xmin = -Inf,
xmax = Inf
) +
annotation_custom(
make_gradient(deg = 0),
ymin = -Inf,
ymax = Inf,
xmin = 48,
xmax = Inf
)
# ggplot_gtable(ggplot_build(p))
brand_plot(p, asp = 16/9, save_name = 'xfp_half_PPR_box_2020_test.png', fade_borders = '', data_home = 'Data: @nflfastR', tm_wordmarks = T)
source('plots/assets/plot_theme.R')
p <- sim_df %>%
left_join(percentile_df) %>%
left_join(WR_rank_df) %>%
mutate(
sim_pg = sim_tot / tot_gp,
pl_lab = paste0(receiver, '\n', number(perc * 100, accuracy = 0.1), ' perc.'),
posteam = factor(posteam, .tm_div_order_alt)
) %>%
group_by(posteam, receiver) %>%
mutate(
obs_num = row_number(),
status_color = if_else(status != "ONTEAM", color_cw[6], color_cw[5])
) %>%
ggplot(aes(
x = sim_pg,
y = tm_rnk,
group = receiver,
label = pl_lab
)) +
facet_wrap(. ~ posteam, nrow = 4, scales = 'free') +
geom_point(
aes(x = ifelse(obs_num == 1, half_PPR_pg, NA), y = tm_rnk + 0.08),
color = color_cw[2],
fill = color_cw[8],
shape = 24,
size = 0.6,
stroke = 0.2,
na.rm = T
) +
stat_density_ridges(
aes(fill = factor(stat(quantile))),
geom = 'density_ridges_gradient',
quantiles = c(.1, .25, .75, .9),
rel_min_height = 0.001,
bandwidth = 1,
calc_ecdf = T,
scale = 0.9,
color = color_cw[6],
size = 0.2,
show.legend = F
) +
#geom_boxplot(size = 0.4, color = 'darkblue', width = 0.6, outlier.alpha = 0, notchwidth = 1) +
scale_color_manual(values = c(
color_cw[6],
color_cw[5],
color_cw[7]
)) +
geom_shadowtext(
aes(
x = ifelse(obs_num == 1, 48, NA),
y = tm_rnk - 0.5,
color = factor(status)
),
hjust = 1,
bg.color = color_cw[2],
#[family = font_family,]
size = 1.2,
na.rm = T,
bg.r = 0.2
) +
scale_x_continuous(
breaks = seq(0, 80, 10),
expand = expansion(mult = 0),
limits = c(0, 50)
) +
scale_y_reverse(expand = expansion(mult = c(0, 0.04), add = c(0.2, 0)), limits = c(4.1, 0)) +
scale_fill_manual(values = c(
alpha(color_cw[7], 0.5),
alpha(color_cw[6], 0.5),
alpha(color_cw[5], 0.5),
alpha(color_cw[6], 0.5),
alpha(color_cw[7], 0.5)
)) +
labs(
title = paste0('2020 Expected 1/2 PPR Fantasy Points per Game as of Week ', my_week),
subtitle = 'Grey represents middle 50% of outcomes, Orange tails are each 10% of outcomes  |  Caret shows actual avg  |  Based on 10,000 Simulations',
x = NULL
) +
theme_cw +
theme(
axis.title.y = element_blank(),
axis.text.y = element_blank(),
axis.ticks.y = element_blank(),
panel.grid.major.y = element_blank(),
axis.text = element_text(size = 4),
axis.line = element_line(color = '#e0e0e0', size = 0.5),
panel.border = element_rect(color = '#16191C', size = 0.1),
axis.ticks.length = unit(0.15, 'lines'),
axis.ticks = element_line(color = '#e0e0e0', size = 0.5),
panel.grid.minor.x = element_line('#16191C', size = 0.2),
panel.spacing.x = unit(0.5, 'lines')
) +
annotation_custom(
make_gradient(deg = 270),
ymin = Inf,
ymax = -0.1,
xmin = -Inf,
xmax = Inf
) +
annotation_custom(
make_gradient(deg = 0),
ymin = -Inf,
ymax = Inf,
xmin = 48,
xmax = Inf
)
# ggplot_gtable(ggplot_build(p))
brand_plot(p, asp = 16/9, save_name = 'xfp_half_PPR_box_2020_test.png', fade_borders = '', data_home = 'Data: @nflfastR', tm_wordmarks = T)
source('plots/assets/plot_theme.R')
p <- sim_df %>%
left_join(percentile_df) %>%
left_join(WR_rank_df) %>%
mutate(
sim_pg = sim_tot / tot_gp,
pl_lab = paste0(receiver, '\n', number(perc * 100, accuracy = 0.1), ' perc.'),
posteam = factor(posteam, .tm_div_order_alt)
) %>%
group_by(posteam, receiver) %>%
mutate(
obs_num = row_number(),
status_color = if_else(status != "ONTEAM", color_cw[6], color_cw[5])
) %>%
ggplot(aes(
x = sim_pg,
y = tm_rnk,
group = receiver,
label = pl_lab
)) +
facet_wrap(. ~ posteam, nrow = 4, scales = 'free') +
geom_point(
aes(x = ifelse(obs_num == 1, half_PPR_pg, NA), y = tm_rnk + 0.08),
color = color_cw[2],
fill = color_cw[8],
shape = 24,
size = 0.6,
stroke = 0.2,
na.rm = T
) +
stat_density_ridges(
aes(fill = factor(stat(quantile))),
geom = 'density_ridges_gradient',
quantiles = c(.1, .25, .75, .9),
rel_min_height = 0.001,
bandwidth = 1,
calc_ecdf = T,
scale = 0.9,
color = color_cw[6],
size = 0.2,
show.legend = F
) +
#geom_boxplot(size = 0.4, color = 'darkblue', width = 0.6, outlier.alpha = 0, notchwidth = 1) +
scale_color_manual(values = c(
color_cw[6],
color_cw[5],
color_cw[7]
)) +
geom_shadowtext(
aes(
x = ifelse(obs_num == 1, 48, NA),
y = tm_rnk - 0.5,
color = factor(status)
),
hjust = 1,
bg.color = color_cw[2],
#[family = font_family,]
size = 1.2,
na.rm = T,
bg.r = 0.2
) +
scale_x_continuous(
breaks = seq(0, 80, 10),
expand = expansion(mult = 0),
limits = c(0, 50)
) +
scale_y_reverse(expand = expansion(mult = c(0, 0.04), add = c(0.2, 0)), limits = c(4.1, 0)) +
scale_fill_manual(values = c(
alpha(color_cw[7], 0.5),
alpha(color_cw[6], 0.5),
alpha(color_cw[5], 0.5),
alpha(color_cw[6], 0.5),
alpha(color_cw[7], 0.5)
)) +
labs(
title = paste0('2020 Expected 1/2 PPR Fantasy Points per Game as of Week ', my_week),
subtitle = 'Grey represents middle 50% of outcomes, Orange tails are each 10% of outcomes  |  Caret shows actual avg  |  Based on 10,000 Simulations',
x = NULL
) +
theme_cw +
theme(
axis.title.y = element_blank(),
axis.text.y = element_blank(),
axis.ticks.y = element_blank(),
panel.grid.major.y = element_blank(),
axis.text = element_text(size = 4),
axis.line = element_line(color = '#e0e0e0', size = 0.5),
panel.border = element_rect(color = '#16191C', size = 0.1),
axis.ticks.length = unit(0.15, 'lines'),
axis.ticks = element_line(color = '#e0e0e0', size = 0.5),
panel.grid.minor.x = element_line('#16191C', size = 0.2),
panel.spacing.x = unit(0.5, 'lines')
) +
annotation_custom(
make_gradient(deg = 270),
ymin = Inf,
ymax = -0.1,
xmin = -Inf,
xmax = Inf
) +
annotation_custom(
make_gradient(deg = 0),
ymin = -Inf,
ymax = Inf,
xmin = 48,
xmax = Inf
)
# ggplot_gtable(ggplot_build(p))
brand_plot(p, asp = 16/9, save_name = 'xfp_half_PPR_box_2020_test.png', fade_borders = '', data_home = 'Data: @nflfastR', tm_wordmarks = T)
source('plots/assets/plot_theme.R')
p <- sim_df %>%
left_join(percentile_df) %>%
left_join(WR_rank_df) %>%
mutate(
sim_pg = sim_tot / tot_gp,
pl_lab = paste0(receiver, '\n', number(perc * 100, accuracy = 0.1), ' perc.'),
posteam = factor(posteam, .tm_div_order_alt)
) %>%
group_by(posteam, receiver) %>%
mutate(
obs_num = row_number(),
status_color = if_else(status != "ONTEAM", color_cw[6], color_cw[5])
) %>%
ggplot(aes(
x = sim_pg,
y = tm_rnk,
group = receiver,
label = pl_lab
)) +
facet_wrap(. ~ posteam, nrow = 4, scales = 'free') +
geom_point(
aes(x = ifelse(obs_num == 1, half_PPR_pg, NA), y = tm_rnk + 0.08),
color = color_cw[2],
fill = color_cw[8],
shape = 24,
size = 0.6,
stroke = 0.2,
na.rm = T
) +
stat_density_ridges(
aes(fill = factor(stat(quantile))),
geom = 'density_ridges_gradient',
quantiles = c(.1, .25, .75, .9),
rel_min_height = 0.001,
bandwidth = 1,
calc_ecdf = T,
scale = 0.9,
color = color_cw[6],
size = 0.2,
show.legend = F
) +
#geom_boxplot(size = 0.4, color = 'darkblue', width = 0.6, outlier.alpha = 0, notchwidth = 1) +
scale_color_manual(values = c(
color_cw[6],
color_cw[5],
color_cw[7]
)) +
geom_shadowtext(
aes(
x = ifelse(obs_num == 1, 48, NA),
y = tm_rnk - 0.5,
color = factor(status)
),
hjust = 1,
bg.color = color_cw[2],
#[family = font_family,]
size = 1.2,
na.rm = T,
bg.r = 0.2
) +
scale_x_continuous(
breaks = seq(0, 80, 10),
expand = expansion(mult = 0),
limits = c(0, 50)
) +
scale_y_reverse(expand = expansion(mult = c(0, 0.04), add = c(0.2, 0)), limits = c(4.1, 0)) +
scale_fill_manual(values = c(
alpha(color_cw[7], 0.5),
alpha(color_cw[6], 0.5),
alpha(color_cw[5], 0.5),
alpha(color_cw[6], 0.5),
alpha(color_cw[7], 0.5)
)) +
labs(
title = paste0('2020 Expected 1/2 PPR Fantasy Points per Game as of Week ', my_week),
subtitle = 'Grey represents middle 50% of outcomes, Orange tails are each 10% of outcomes  |  Caret shows actual avg  |  Based on 10,000 Simulations',
x = NULL
) +
theme_cw +
theme(
axis.title.y = element_blank(),
axis.text.y = element_blank(),
axis.ticks.y = element_blank(),
panel.grid.major.y = element_blank(),
axis.text = element_text(size = 4),
axis.line = element_line(color = '#e0e0e0', size = 0.5),
panel.border = element_rect(color = '#16191C', size = 0.1),
axis.ticks.length = unit(0.15, 'lines'),
axis.ticks = element_line(color = '#e0e0e0', size = 0.5),
panel.grid.minor.x = element_line('#16191C', size = 0.2),
panel.spacing.x = unit(0.5, 'lines')
) +
annotation_custom(
make_gradient(deg = 270),
ymin = Inf,
ymax = -0.1,
xmin = -Inf,
xmax = Inf
) +
annotation_custom(
make_gradient(deg = 0),
ymin = -Inf,
ymax = Inf,
xmin = 48,
xmax = Inf
)
# ggplot_gtable(ggplot_build(p))
brand_plot(p, asp = 16/9, save_name = 'xfp_half_PPR_box_2020_test.png', fade_borders = '', data_home = 'Data: @nflfastR', tm_wordmarks = T)
source('~/Documents/dev/football/plots/assets/plot_theme.R')
source('plots/assets/plot_theme.R')
p <- sim_df %>%
left_join(percentile_df) %>%
left_join(WR_rank_df) %>%
mutate(
sim_pg = sim_tot / tot_gp,
pl_lab = paste0(receiver, '\n', number(perc * 100, accuracy = 0.1), ' perc.'),
posteam = factor(posteam, .tm_div_order_alt)
) %>%
group_by(posteam, receiver) %>%
mutate(
obs_num = row_number(),
status_color = if_else(status != "ONTEAM", color_cw[6], color_cw[5])
) %>%
ggplot(aes(
x = sim_pg,
y = tm_rnk,
group = receiver,
label = pl_lab
)) +
facet_wrap(. ~ posteam, nrow = 4, scales = 'free') +
geom_point(
aes(x = ifelse(obs_num == 1, half_PPR_pg, NA), y = tm_rnk + 0.08),
color = color_cw[2],
fill = color_cw[8],
shape = 24,
size = 0.6,
stroke = 0.2,
na.rm = T
) +
stat_density_ridges(
aes(fill = factor(stat(quantile))),
geom = 'density_ridges_gradient',
quantiles = c(.1, .25, .75, .9),
rel_min_height = 0.001,
bandwidth = 1,
calc_ecdf = T,
scale = 0.9,
color = color_cw[6],
size = 0.2,
show.legend = F
) +
#geom_boxplot(size = 0.4, color = 'darkblue', width = 0.6, outlier.alpha = 0, notchwidth = 1) +
scale_color_manual(values = c(
color_cw[6],
color_cw[5],
color_cw[7]
)) +
geom_shadowtext(
aes(
x = ifelse(obs_num == 1, 48, NA),
y = tm_rnk - 0.5,
color = factor(status)
),
hjust = 1,
bg.color = color_cw[2],
#[family = font_family,]
size = 1.2,
na.rm = T,
bg.r = 0.2
) +
scale_x_continuous(
breaks = seq(0, 80, 10),
expand = expansion(mult = 0),
limits = c(0, 50)
) +
scale_y_reverse(expand = expansion(mult = c(0, 0.04), add = c(0.2, 0)), limits = c(4.1, 0)) +
scale_fill_manual(values = c(
alpha(color_cw[7], 0.5),
alpha(color_cw[6], 0.5),
alpha(color_cw[5], 0.5),
alpha(color_cw[6], 0.5),
alpha(color_cw[7], 0.5)
)) +
labs(
title = paste0('2020 Expected 1/2 PPR Fantasy Points per Game as of Week ', my_week),
subtitle = 'Grey represents middle 50% of outcomes, Orange tails are each 10% of outcomes  |  Caret shows actual avg  |  Based on 10,000 Simulations',
x = NULL
) +
theme_cw +
theme(
axis.title.y = element_blank(),
axis.text.y = element_blank(),
axis.ticks.y = element_blank(),
panel.grid.major.y = element_blank(),
axis.text = element_text(size = 4),
axis.line = element_line(color = '#e0e0e0', size = 0.5),
panel.border = element_rect(color = '#16191C', size = 0.1),
axis.ticks.length = unit(0.15, 'lines'),
axis.ticks = element_line(color = '#e0e0e0', size = 0.5),
panel.grid.minor.x = element_line('#16191C', size = 0.2),
panel.spacing.x = unit(0.5, 'lines')
) +
annotation_custom(
make_gradient(deg = 270),
ymin = Inf,
ymax = -0.1,
xmin = -Inf,
xmax = Inf
) +
annotation_custom(
make_gradient(deg = 0),
ymin = -Inf,
ymax = Inf,
xmin = 48,
xmax = Inf
)
# ggplot_gtable(ggplot_build(p))
brand_plot(p, asp = 16/9, save_name = 'xfp_half_PPR_box_2020_test.png', fade_borders = '', data_home = 'Data: @nflfastR', tm_wordmarks = T)
