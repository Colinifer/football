library(rtweet)
get_favorites('fakeColinW', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
install.packages(tidyverse, rtweet)
library(tidyverse)
library(rtweet)
get_favorites('fakeColinW', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
install.packages("rtweet")
library(tidyverse)
library(rtweet)
get_favorites('fakeColinW', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
library(tidyverse)
library(rtweet)
get_favorites('fakeColinW', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
library(tidyverse)
library(rtweet)
get_favorites('fakeColinW', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('nosemajguod', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('lebrasajames', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('brial22', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('aaronstank', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('benbbaldwin ', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('brial22', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('aaronstank', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('benbbaldwin', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('brial22', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('aaronstank', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('brial22', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('brial22', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('simplynader', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('aaronstank', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('benbbaldwin', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('gblanco121', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets gblanco121 liked') %>%
slice(1:5)
get_favorites('MCSUDABUDA', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets MCSUDABUDA liked') %>%
slice(1:5)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:5)
get_favorites('brial22', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets brial22 liked') %>%
slice(1:10)
get_favorites('brial22', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets brial22 liked') %>%
slice(1:10)
get_favorites('brial22', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets brial22 liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('brial22', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets brial22 liked') %>%
slice(1:10)
get_favorites('fakeColinW', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:10)
get_favorites('ChartingHockey', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets ChartingHockey liked') %>%
slice(1:10)
get_favorites('IneffectiveMath', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets IneffectiveMath liked') %>%
slice(1:10)
library(tidyverse)
library(rtweet)
get_favorites('simplynader', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets simplynader liked') %>%
slice(1:10)
get_favorites('gblanco121', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets gblanco121 liked') %>%
slice(1:10)
library(tidyverse)
library(rtweet)
get_favorites('nosemajguod', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets nosemajguod' liked') %>%
slice(1:10)
get_favorites('nosemajguod', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets nosemajguod' liked') %>%
slice(1:10)
get_favorites('nosemajguod', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets nosemajguod' liked') %>%
slice(1:10)
get_favorites('nosemajguod', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets nosemajguod liked') %>%
slice(1:10)
library(tidyverse)
library(rtweet)
get_favorites('JaredL_Phillips', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets JaredL_Phillips liked') %>%
slice(1:10)
get_favorites('DJSteveJones', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets DJSteveJones liked') %>%
slice(1:10)
get_favorites('BenMcWilliams22', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets BenMcWilliams22 liked') %>%
slice(1:10)
get_favorites('temerrick', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets temerrick liked') %>%
slice(1:10)
source('~/Documents/dev/football/init.R')
source('~/Documents/dev/football/init.R')
install.packages("animate")
x <- c(1, 2, 3)
y <- x
y[[3]]
y[[2]]
x <- c(4, 5, 6)
y <- x
y[[2]]
y[2]
rnorm(10)
rnorm(10)
rnorm(10)
df <- tibble(
a = rnorm(10),
b = rnorm(10),
c = rnorm(10),
d = rnorm(10)
)
df <- tibble(
a = rnorm(10),
b = rnorm(10),
c = rnorm(10),
d = rnorm(10)
)
median(df$a)
median(df$b)
median(df$c)
median(df$d)
library(tidyverse)
df <- tibble(
a = rnorm(10),
b = rnorm(10),
c = rnorm(10),
d = rnorm(10)
)
median(df$a)
median(df$b)
median(df$c)
median(df$d)
output <- vector("double", ncol(df))  # 1. output
for (i in seq_along(df)) {            # 2. sequence
output[[i]] <- median(df[[i]])      # 3. body
}
output
ncol(df)
seq_along(df)
?seq_along
ins
median(df[[i]]
)
i
View(df)
output[[i]]
output <- vector("double", ncol(df))
## devtools::install_github(repo = "maksimhorowitz/nflscrapR")
pkgs <- c("devtools", "tidyverse", "readr",
"pander", "na.tools", "ggimage",
"devtools", "teamcolors", "glue",
"dplyr", "tictoc", "animation",
"gt", "DT", "ggthemes",
"bbplot", "ggtext", "ggforce",
"ggridges", "ggrepel", "ggbeeswarm",
"extrafont")
installed_packages <- pkgs %in%
rownames(installed.packages())
if (any(installed_packages == FALSE)) {
install.packages(pkgs[!installed_packages])
}
invisible(lapply(pkgs, library, character.only = TRUE))
library("nflscrapR")
##install.packages(c("devtools", "tidyverse", "readr", "pander", "na.tools", "ggimage", "devtools", "teamcolors", "glue", "animate", "dplyr", "tictoc", "animation"))
##devtools::install_github(repo = "maksimhorowitz/nflscrapR")
##reset
setwd("~/")
gid <- paste(getwd())
gid
device <- ""
if (gid == "/Volumes/HDD/Users/colinwelsh") {
##Maverick - MBP
setwd("~/Documents/dev/football")
device <- "Maverick (MBP)"
} else if (gid == "/Users/ColinWelsh") {
##Goose - iMac
setwd("~/Documents/dev/football")
device <- "Goose (iMac)"
} else if (gid == "/Users/ColinWelsh") {
##Goose - iMac
setwd("~/Documents/dev/football")
device <- "RStudio Cloud"
}
print(paste(device, "is ready for some football", sep = " "))
rm(gid, device)
#   Formate today for latest scrape
today <- format(Sys.Date(), "%Y%d%m")
## Create a list of Game IDs
###############
season_state <- c("pre", "reg", "post")
season_state <- c("reg", "post")
all_game_ids <- list.files(paste("data/games/", season_state, "_season", sep = ""),
pattern = "*.csv", full.names = TRUE) %>%
lapply(read_csv) %>%
bind_rows()
all_game_ids <- all_game_ids$game_id
all_game_ids <- all_game_ids[all_game_ids <= today]
all_files <- c()
## Solved postseason year filepath bug
###############
get_t.year <- function(x) {
if(as.integer(substr(x, 5, 6)) < 3) {
invisible(as.integer(substr(x, 1, 4)) - 1)
}
else {
invisible(substr(x, 1, 4))
}
}
## Create a list of all files
###############
name_all_files <- function(x) {
t.year <- get_t.year(x)
f.pbp_x <- paste("data/games/", t.year, "/", x, ".csv", sep = "")
f.players_x <- paste("data/players/", t.year, "/", x, "players.csv", sep = "")
all_files <- append(all_files, f.pbp_x)
all_files <- append(all_files, f.players_x)
}
all_files <- all_game_ids %>% lapply(name_all_files)
all_files <- unlist(all_files)
## Scrape all files
###############
scrape_all_files <- function(x) {
if (file.exists(x) == TRUE) {
print(paste("All", x, "files exist"))
}
if (file.exists(x) == FALSE) {
## tf.pbp_file <- paste("data/games/", t.year, "/", t.game_id, ".csv", sep = "")
## tf.player_file <- paste("data/players/", t.year, "/", t.game_id, "players.csv", sep = "")
## Game logic
if (substr(x, 6, 6) == "g") {
t.game_id <- x %>% substr(17, 26) %>% as.integer()
t.year <- get_t.year(t.game_id)
paste("Scraping game data for", t.game_id, sep = " ") %>% print()
tf.df <- nflscrapR::scrape_json_play_by_play(t.game_id)
print("Successfully scraped pbp!")
}
## Player logic
if (substr(x, 6, 6) == "p") {
t.game_id <- x %>% substr(19, 28) %>% as.integer()
tf.pbp_file <- paste("data/games/", get_t.year(t.game_id), "/", t.game_id, ".csv", sep = "")
paste("Scraping player data for", t.game_id, sep = " ") %>% print()
tf.df <- player_game(t.game_id)
print("Successfully scraped player game!")
targets <- read_csv(tf.pbp_file) %>% filter(play_type == "pass" & receiver_player_id != "NA")
tf.targets <- tibble(
playerID = unique(targets$receiver_player_id),
targets = integer(length(unique(targets$receiver_player_id)))
)
add_targets <- function(x){
tf.targets[tf.targets$playerID == x, "targets"] <- sum(targets$receiver_player_id == x)
}
tf.targets$playerID %>% lapply(add_targets)
tf.targets$targets <- unlist(tf.targets$playerID %>% lapply(add_targets))
tf.df <- dplyr::left_join(tf.df, tf.targets, by = "playerID")
print("Successfully joined targets to player game!")
}
write.csv(tf.df, file = x, row.names = FALSE)
}
}
lapply(all_files, scrape_all_files)
rm(x)
rm(y)
rm(output)
rm(i)
pkgs <- c("devtools", "tidyverse", "readr",
"pander", "na.tools", "ggimage",
"devtools", "teamcolors", "glue",
"dplyr", "tictoc", "animation",
"gt", "DT", "ggthemes",
"bbplot", "ggtext", "ggforce",
"ggridges", "ggrepel", "ggbeeswarm",
"extrafont")
installed_packages <- pkgs %in%
rownames(installed.packages())
if (any(installed_packages == FALSE)) {
install.packages(pkgs[!installed_packages])
}
invisible(lapply(pkgs, library, character.only = TRUE))
library("nflscrapR")
##install.packages(c("devtools", "tidyverse", "readr", "pander", "na.tools", "ggimage", "devtools", "teamcolors", "glue", "animate", "dplyr", "tictoc", "animation"))
##devtools::install_github(repo = "maksimhorowitz/nflscrapR")
##reset
setwd("~/")
gid <- paste(getwd())
gid
device <- ""
if (gid == "/Volumes/HDD/Users/colinwelsh") {
## Maverick - MBP
setwd("~/Documents/dev/football")
device <- "Maverick (MBP)"
} else if (gid == "/Users/ColinWelsh") {
## Goose - iMac
setwd("~/Documents/dev/football")
device <- "Goose (iMac)"
} else if (gid == "/home/rstudio-user") {
## RStudio Cloud
setwd("/cloud/project")
device <- "RStudio Cloud"
}
print(paste(device, "is ready for some football", sep = " "))
rm(gid, device)
scrape_game_ids(2003)
load("/Users/ColinWelsh/Downloads/nflteams.rda")
View(nflteams)
library(readr)
team_abbr <- read_csv("data/season_total/team_abbr.csv")
View(team_abbr)
team_abbr$X7
team_abbr %>% rename("X7" = "wiki_logo")
team_abbr %>% rename("wiki_logo" = "X7")
team_abbr <- team_abbr %>% rename("wiki_logo" = "X7")
nflteams <- nflteams %>% rename("full_name" = "team")
team_abbr <- dplyr::left_join(team_abbr, nflteams, by = "full_name")
team_abbr$abbr <- NULL
View(nflteams)
colnames(team_abbr)
team_abbr %>% colnames() %>% length()
ncol(team_abbr)
team_abbr[,c(1:5,ncol(team_abbr),6:ncol(team_abbr)-1]
team_abbr[,c(1:5,ncol(team_abbr),6:ncol(team_abbr)-1)]
View(nflteams)
team_abbr <-
team_abbr[,c(1:6,ncol(team_abbr),7:ncol(team_abbr)-1)]
View(team_abbr)
team_abbr[,c(1:5,ncol(team_abbr),7:ncol(team_abbr)-1)]
team_abbr <- read_csv("data/season_total/team_abbr.csv")
team_abbr <- dplyr::left_join(team_abbr, nflteams, by = "full_name")
colnames(team_abbr)
team_abbr[,c(1:5,ncol(team_abbr),7:ncol(team_abbr)-1)]
team_abbr$X7 <- NULL
team_abbr[,c(1:5,ncol(team_abbr),7:ncol(team_abbr)-1)]
team_abbr[,c(1:5,ncol(team_abbr),6:ncol(team_abbr)-1)]
team_abbr <- read_csv("data/season_total/team_abbr.csv")
team_abbr <- dplyr::left_join(team_abbr, nflteams, by = "full_name")
rename(team_abbr, c("wiki_logo"="X7"))
team_abbr[,c(1:5,ncol(team_abbr),6:ncol(team_abbr)-1)]
team_abbr[,c(1:6,ncol(team_abbr),7:ncol(team_abbr)-1)]
team_abbr[,c(1:6,ncol(team_abbr),7:ncol(team_abbr)-1)]
x.players[,c(1:20,ncol(x.players),22:ncol(x.players)-1))
team_abbr[,c(1:6,ncol(team_abbr),7:ncol(team_abbr)-1)]
ncol(team_abbr)-1)
ncol(team_abbr)
ncol(team_abbr)-1
team_abbr[,ncol(team_abbr)-1)]
team_abbr[,ncol(team_abbr)-1]
team_abbr[7]
rename(team_abbr, c("wiki_logo"="X7"))
team_abb <- rename(team_abbr, c("wiki_logo"="X7"))
team_abbr[7]
team_abb <- rename(team_abbr, c("wiki_logo"="X7"))
team_abbr <- rename(team_abbr, c("wiki_logo"="X7"))
rm(team_abb)
team_abbr[7]
team_abbr[6]
team_abbr[5]
team_abbr[,c(1:5,ncol(team_abbr),6:ncol(team_abbr)-1)]
1:5
ncol(team_abbr)
6
ncol(team_abbr)-1
c(1:5,ncol(team_abbr),6:ncol(team_abbr)-1)
c(1:5,ncol(team_abbr),7:ncol(team_abbr)-1)
team_abbr[,c(1:5,ncol(team_abbr),7:ncol(team_abbr)-1)]
team_abbr <- team_abbr[,c(1:5,ncol(team_abbr),7:ncol(team_abbr)-1)]
team_abbr$abbr <- NULL
write.csv(team_abbr, "data/season_total/team_abbr.csv")
