library(tidyverse)
pbp_18 <- scrape_season_play_by_play(2018)
pbp_18 <- scrape_season_play_by_play(2018)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
pbp_18 <- scrape_season_play_by_play(2018)
library(tidyverse)
pbp_18 <- read_csv("https://raw.githubusercontent.com/ryurko/nflscrapR-data/master/play_by_play_data/regular_season/reg_pbp_2018.csv")
View(pbp_18)
View(pbp_18)
View(pbp_18)
pbp_18 <- read_csv("https://raw.githubusercontent.com/ryurko/nflscrapR-data/master/play_by_play_data/regular_season/reg_pbp_2018.csv")
library(nflscrapR)
library(tidyverse)
pbp_data <- scrape_season_play_by_play(2018)
write.csv(pbp_data, file = "C:/Users/Colinwelsh//Downloads/nfl/season2018.csv",row.names=FALSE)
library(tidyverse)
pbp_18 <- scrape_season_play_by_play(2018)
library(nflscrapR)
install.packages(c("backports", "BH", "bindr", "bindrcpp", "bit", "blob", "broom", "callr", "caTools", "cli", "clipr", "cluster", "curl", "DBI", "dbplyr", "digest", "dplyr", "evaluate", "fmsb", "forcats", "foreign", "ggplot2", "glue", "haven", "highr", "hms", "knitr", "lubridate", "MASS", "Matrix", "mgcv", "mime", "modelr", "munsell", "nlme", "odbc", "openssl", "pkgconfig", "plogr", "psych", "purrr", "R6", "Rcpp", "readxl", "reprex", "reshape2", "rlang", "rmarkdown", "rpart", "rprojroot", "rstudioapi", "scales", "selectr", "stringi", "stringr", "survival", "tibble", "tidyr", "tidyselect", "viridisLite", "xml2", "yaml"))
devtools::install_github("rstudio/r2d3")
install.packages("rtweet")
library(tidyverse)
library(rtweet)
get_favoritys('fakecolinw', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:6)
install.packages(c("assertthat", "backports", "BH", "bindr", "bindrcpp", "bit", "blob", "boot", "broom", "caret", "caTools", "class", "cluster", "codetools", "colorspace", "config", "curl", "CVST", "data.table", "DBI", "dbplyr", "ddalpha", "digest", "dimRed", "dplyr", "DRR", "evaluate", "forcats", "foreach", "foreign", "formatR", "ggplot2", "gistr", "glmnet", "glue", "gower", "gtable", "haven", "hexbin", "highr", "hms", "htmlwidgets", "httpuv", "httr", "ipred", "IRdisplay", "IRkernel", "iterators", "jsonlite", "kernlab", "knitr", "lattice", "lava", "lazyeval", "lubridate", "maps", "markdown", "MASS", "Matrix", "mgcv", "mime", "miniUI", "ModelMetrics", "modelr", "mongolite", "munsell", "nlme", "numDeriv", "odbc", "openssl", "packrat", "pbdZMQ", "pkgconfig", "plogr", "prodlim", "profvis", "pryr", "psych", "purrr", "quantmod", "R6", "randomForest", "Rcpp", "RcppRoll", "RCurl", "readr", "readxl", "recipes", "repr", "reshape2", "rJava", "RJDBC", "RJSONIO", "rlang", "rmarkdown", "robustbase", "rpart", "rprojroot", "rsconnect", "rstudioapi", "rvest", "scales", "selectr", "sfsmisc", "shiny", "sourcetools", "sparklyr", "stringi", "stringr", "survival", "tibble", "tidyr", "tidyselect", "tidyverse", "timeDate", "TTR", "viridisLite", "withr", "xml2", "xtable", "xts", "yaml", "zoo"))
install.packages("rtweet")
library(tidyverse)
library(rtweet)
get_favoritys('fakecolinw', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:6)
get_favoritys('fakeColinW', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:6)
get_favorites('fakeColinW', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:6)
get_favorites('fakeColinW', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
install.packages("tidyverse")
library(tidyverse)
library(rtweet)
get_favorites('fakeColinW', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
install.packages(c("backports", "bindrcpp", "bit", "caTools", "class", "cluster", "colorspace", "curl", "data.table", "digest", "foreign", "glmnet", "glue", "gower", "hexbin", "ipred", "jsonlite", "kernlab", "lattice", "lazyeval", "lubridate", "maps", "markdown", "MASS", "Matrix", "mgcv", "mime", "ModelMetrics", "nlme", "pbdZMQ", "prodlim", "profvis", "pryr", "purrr", "randomForest", "Rcpp", "RcppRoll", "RCurl", "reshape2", "rJava", "RJSONIO", "rlang", "robustbase", "rpart", "scales", "sourcetools", "stringi", "stringr", "survival", "tidyselect", "TTR", "xml2", "xts", "yaml", "zoo"))
library(tidyverse)
library(rtweet)
get_favorites('fakeColinW', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
install.packages(tidyverse, rtweet)
library(tidyverse)
library(rtweet)
get_favorites('fakeColinW', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
install.packages(tidyverse, rtweet)
library(tidyverse)
library(rtweet)
get_favorites('fakeColinW', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
install.packages("rtweet")
library(tidyverse)
library(rtweet)
get_favorites('fakeColinW', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
library(tidyverse)
library(rtweet)
get_favorites('fakeColinW', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
library(tidyverse)
library(rtweet)
get_favorites('fakeColinW', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('nosemajguod', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('lebrasajames', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('brial22', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('aaronstank', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('benbbaldwin ', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('brial22', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('aaronstank', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('benbbaldwin', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('brial22', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('aaronstank', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('brial22', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('brial22', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('simplynader', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('aaronstank', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('benbbaldwin', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:5)
get_favorites('gblanco121', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets gblanco121 liked') %>%
slice(1:5)
get_favorites('MCSUDABUDA', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets MCSUDABUDA liked') %>%
slice(1:5)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:5)
get_favorites('brial22', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets brial22 liked') %>%
slice(1:10)
get_favorites('brial22', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets brial22 liked') %>%
slice(1:10)
get_favorites('brial22', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets brial22 liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('walexbelsh', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets walexbelsh liked') %>%
slice(1:10)
get_favorites('brial22', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets brial22 liked') %>%
slice(1:10)
get_favorites('fakeColinW', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets I liked') %>%
slice(1:10)
get_favorites('ChartingHockey', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets ChartingHockey liked') %>%
slice(1:10)
get_favorites('IneffectiveMath', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets IneffectiveMath liked') %>%
slice(1:10)
library(tidyverse)
library(rtweet)
get_favorites('simplynader', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets simplynader liked') %>%
slice(1:10)
get_favorites('gblanco121', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets gblanco121 liked') %>%
slice(1:10)
library(tidyverse)
library(rtweet)
get_favorites('nosemajguod', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets nosemajguod' liked') %>%
slice(1:10)
get_favorites('nosemajguod', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets nosemajguod' liked') %>%
slice(1:10)
get_favorites('nosemajguod', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets nosemajguod' liked') %>%
slice(1:10)
get_favorites('nosemajguod', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets nosemajguod liked') %>%
slice(1:10)
library(tidyverse)
library(rtweet)
get_favorites('JaredL_Phillips', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets JaredL_Phillips liked') %>%
slice(1:10)
get_favorites('DJSteveJones', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets DJSteveJones liked') %>%
slice(1:10)
get_favorites('BenMcWilliams22', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets BenMcWilliams22 liked') %>%
slice(1:10)
get_favorites('temerrick', n=3000) %>%
group_by('@' = screen_name) %>%
tally(sort=TRUE, name='# of tweets temerrick liked') %>%
slice(1:10)
##install.packages("devtools", "tidyverse", "readr", "pander", "na.tools", "ggimage", "devtools")
##devtools::install_github(repo = "maksimhorowitz/nflscrapR")
library(nflscrapR)
library(tidyverse)
library(readr)
library(pander)
library(dplyr)
library(na.tools)
library(ggimage)
##test
##setwd("~/")
gid <- paste(getwd())
gid
device <- ""
if (gid == "/Volumes/HDD/Users/colinwelsh") {
##Maverick - MBP
setwd("~/Documents/dev/football")
device <- "Maverick (MBP)"
} else if (gid == "/Users/ColinWelsh") {
##Goose - iMac
setwd("~/Documents/dev/football")
device <- "Goose (iMac)"
##add Goose
}
print(paste(device, "is ready for some football", sep = " "))
rm(gid, device)
##set custom variables
userYear <- 2019
userWeek <- 3
##today <- Sys.Date()
#test date
date <- 20190922
##date <- format(today, format="%Y%m%d")
game_ids <- read.csv("data/games_data/reg_season/reg_games_2019.csv")
currentGameIDs <- game_ids$game_id
#pull games in 2019 season that match today's date
currentGames <- grep(date, currentGameIDs)
games_in_play <- currentGameIDs[currentGames]
##can't figure this out yet
games_in_play <- game_ids$state_of_game[currentGames] != "POST"
##
nplay <- length(games_in_play)
nplayLoop <- 1
##
#scrape pbp of active games
for (x in games_in_play) {
#read game csv
y <- read.csv(paste("data/games_data/", userYear, "/", x, ".csv", sep = ""))
#check if y$desc contains "END GAME"
endGame <- grepl("END GAME", y$desc)
#if pbp has END GAME change state_of_game to POST
if(any(endGame == TRUE)) {
game_ids[game_ids$game_id == x, "state_of_game"] <- "POST"
print(paste("Change state of game for ", x, " to POST", sep = ""))
} else {
#scrape
print(paste("Scraping game ", x, sep = ""))
y <- scrape_json_play_by_play(x)
write.csv(y, file = paste("data/games_data/", userYear,"/", x, ".csv", sep = ""))
endGame <- grepl("END GAME", y$desc)
#check for end game and add post status if scrape includes
if(any(endGame == TRUE)) {
game_ids[game_ids$game_id == x, "state_of_game"] <- "POST"
print(paste("Change state of game for ", x, " to POST", sep = ""))
}
}
}
##set custom variables
userYear <- 2019
userWeek <- 3
##today <- Sys.Date()
#test date
date <- 20190922
##date <- format(today, format="%Y%m%d")
game_ids <- read.csv("data/games_data/reg_season/reg_games_2019.csv")
currentGameIDs <- game_ids$game_id
#pull games in 2019 season that match today's date
currentGames <- grep(date, currentGameIDs)
games_in_play <- currentGameIDs[currentGames]
##can't figure this out yet
##games_in_play <- game_ids$state_of_game[currentGames] != "POST"
##
nplay <- length(games_in_play)
nplayLoop <- 1
##
#scrape pbp of active games
for (x in games_in_play) {
#read game csv
y <- read.csv(paste("data/games_data/", userYear, "/", x, ".csv", sep = ""))
#check if y$desc contains "END GAME"
endGame <- grepl("END GAME", y$desc)
#if pbp has END GAME change state_of_game to POST
if(any(endGame == TRUE)) {
game_ids[game_ids$game_id == x, "state_of_game"] <- "POST"
print(paste("Change state of game for ", x, " to POST", sep = ""))
} else {
#scrape
print(paste("Scraping game ", x, sep = ""))
y <- scrape_json_play_by_play(x)
write.csv(y, file = paste("data/games_data/", userYear,"/", x, ".csv", sep = ""))
endGame <- grepl("END GAME", y$desc)
#check for end game and add post status if scrape includes
if(any(endGame == TRUE)) {
game_ids[game_ids$game_id == x, "state_of_game"] <- "POST"
print(paste("Change state of game for ", x, " to POST", sep = ""))
}
}
}
View(game_ids)
